@using PagedList.Mvc;
@model PagedList.IPagedList<Mirabeau.AirPorts.Models.AirPortsModel>
<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />
@{
	ViewBag.Title = "List";
}

<div class="page-header" align="center">
	<h2> 
		Airports
	</h2>
</div>


@using (Html.BeginForm("List", "AirPorts", FormMethod.Get))
{
	<p>
		Search with Iata: @Html.TextBox("SearchString", ViewBag.CurrentFilter as string)
		<input class="btn btn-primary" type="submit" value="Search" />
		<input class="btn btn-info" type="button"  value="Reset" onclick="location.href='@Url.Action("List", "Airports")'" />
		
	</p>

	<p>
		Distance calculation:
		From
		@Html.TextBox("distanceFrom", ViewBag.DistanceFrom as string)
		To
		@Html.TextBox("distanceTo", ViewBag.DistanceTo as string)

		<input class="btn btn-primary" type="submit" value="Calculate" onclick="location.href='@Url.Action("Index", "AirPorts")'" />
	</p>
}


<table class="table table-bordered">
	<thead>
		  <tr>
			  <th>Iata</th>
			  <th>Ion</th>
			  <th>
				   @Html.ActionLink("Iso", "List", new { sortOrder = ViewBag.CountryDescParm, 
															currentFilter=ViewBag.CurrentFilter }) 
			  </th>
			  <th>Status</th>
			  <th>Name</th>
			  <th>Continent</th>
			  <th>Type</th>
			  <th>Iat</th>
			  <th>Size</th>
		  </tr>
	</thead>
	<tbody>
		  @foreach (var item in Model)
		  {
			  <tr>
				  <td>@item.iata</td>
				  <td>@item.lon</td>
				  <td>@item.iso</td>
				  <td>@item.status</td>
				  <td>@item.name</td>
				  <td>@item.continent</td>
				  <td>@item.type</td>
				  <td>@item.lat</td>
				  <td>@item.size</td>
				  
			  </tr> 
		  }
	</tbody>
</table>
<br />
Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount

@Html.PagedListPager(Model, page => Url.Action("List", 
	new { page, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, distanceFrom = ViewBag.DistanceFrom, distanceTo = ViewBag.DistanceTo }))

